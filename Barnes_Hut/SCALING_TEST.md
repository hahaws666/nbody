# Strong Scaling 测试说明

## 测试配置

**问题规模**: 500,000 个粒子（固定）

**测试配置**:

| 配置 | 节点数 | 每节点进程数 | 每进程线程数 | 总MPI进程 | 总线程数 | 作业ID |
|------|--------|-------------|-------------|-----------|---------|--------|
| 1n_5t_8c | 1 | 5 | 8 | 5 | 40 | 86 |
| 1n_10t_4c | 1 | 10 | 4 | 10 | 40 | 87 |
| 1n_20t_2c | 1 | 20 | 2 | 20 | 40 | 88 |
| 2n_5t_8c | 2 | 5 | 8 | 10 | 80 | 89 |
| 2n_10t_4c | 2 | 10 | 4 | 20 | 80 | 90 |
| 2n_20t_2c | 2 | 20 | 2 | 40 | 80 | 91 |

## 查看作业状态

```bash
squeue -u $USER
```

## 查看结果

作业完成后，运行分析脚本：

```bash
./analyze_scaling.sh
```

或者手动查看输出文件：

```bash
ls -lt nbody_*_*.out | head
cat nbody_1n_5t_8c_*.out
```

## 预期结果

Strong scaling 测试将显示：
- **Speedup**: 相对于基准配置的加速比
- **Efficiency**: 并行效率（理想情况下应该接近100%）

理想情况下：
- 从 1 节点到 2 节点，应该获得接近 2 倍的加速
- 在同一节点内，增加 MPI 进程数（减少 OpenMP 线程数）可能影响性能，取决于通信开销

## 注意事项

- 50万粒子是一个较大的问题规模，每个作业可能需要几分钟到十几分钟
- 结果会显示 MPI 通信开销对性能的影响
- Barnes-Hut 算法的并行效率通常很好，因为计算复杂度是 O(N log N)

